<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Filament</title>
    <link rel="stylesheet" href="./styles.css">
</head>
<body>
    <ul class="list"> 
        <li class="card">
            <p>Оливковий</p>
            <div class="quantity">
                <button class="btn"id="decrease-1">-1</button>
                <p id="counter-1">0</p>
                <button class="btn"id="increase-1">+1</button>
            </div>
        </li>
        <li class="card">
            <p>Білий</p>
            <div class="quantity">
                <button class="btn"id="decrease-2">-1</button>
                <p id="counter-2">0</p>
                <button class="btn"id="increase-2">+1</button>
            </div>
        </li>
        <li class="card">
            <p>Чорний</p>
            <div class="quantity">
                <button class="btn"id="decrease-3">-1</button>
                <p id="counter-3">0</p>
                <button class="btn"id="increase-3">+1</button>
            </div>
        </li>
        <li class="card">
            <p>Світло-сірий</p>
            <div class="quantity">
                <button class="btn"id="decrease-4">-1</button>
                <p id="counter-4">0</p>
                <button class="btn"id="increase-4">+1</button>
            </div>
        </li>
        <li class="card">
            <p>Рожевий</p>
            <div class="quantity">
                <button class="btn"id="decrease-5">-1</button>
                <p id="counter-5">0</p>
                <button class="btn"id="increase-5">+1</button>
            </div>
        </li>
        <li class="card">
            <p>Помаранчевий</p>
            <div class="quantity">
                <button class="btn"id="decrease-6">-1</button>
                <p id="counter-6">0</p>
                <button class="btn"id="increase-6">+1</button>
            </div>
        </li>
        <li class="card">
            <p>Жовтий</p>
            <div class="quantity">
                <button class="btn"id="decrease-7">-1</button>
                <p id="counter-7">0</p>
                <button class="btn"id="increase-7">+1</button>
            </div>
        </li>
        <li class="card">
            <p>Коричневий</p>
            <div class="quantity">
                <button class="btn"id="decrease-8">-1</button>
                <p id="counter-8">0</p>
                <button class="btn"id="increase-8">+1</button>
            </div> </li>
        <li class="card">
            <p>Вишневий</p>
            <div class="quantity">
                <button class="btn"id="decrease-9">-1</button>
                <p id="counter-9">0</p>
                <button class="btn"id="increase-9">+1</button>
            </div>
        </li>
        <li class="card">
            <p>Блакитний</p>
            <div class="quantity">
                <button class="btn"id="decrease-10">-1</button>
                <p id="counter-10">0</p>
                <button class="btn"id="increase-10">+1</button>
            </div>
        </li>
        <li class="card">
            <p>Фіолетовий</p>
            <div class="quantity">
                <button class="btn"id="decrease-11">-1</button>
                <p id="counter-11">0</p>
                <button class="btn"id="increase-11">+1</button>
            </div>
        </li>
    </ul>
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
    const counters = document.querySelectorAll("[id^='counter-']");
    const decreaseButtons = document.querySelectorAll("[id^='decrease-']");
    const increaseButtons = document.querySelectorAll("[id^='increase-']");
    
    let counts = {};

    const fetchCounts = async () => {
        try {
            const response = await fetch('https://6676cf76145714a1bd72dc8a.mockapi.io/spools/amount');
            const data = await response.json();
            data.forEach(item => {
                counts[item.id] = item.amount;
                document.querySelector(`#counter-${item.id}`).textContent = item.amount;
            });
        } catch (error) {
            console.error('Failed to fetch counts:', error);
        }
    };

    const updateCountOnServer = async (id, newCount) => {
        try {
            await fetch(`https://6676cf76145714a1bd72dc8a.mockapi.io/spools/amount/${id}`, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ amount: newCount })
            });
        } catch (error) {
            console.error('Failed to update count:', error);
        }
    };

    const updateCounter = (id) => {
        document.querySelector(`#counter-${id}`).textContent = counts[id];
    };

    decreaseButtons.forEach((button) => {
        const id = button.id.split('-')[1];
        button.addEventListener('click', async (e) => {
            e.preventDefault();
            counts[id] -= 1;
            updateCounter(id);
            await updateCountOnServer(id, counts[id]);
        });
    });

    increaseButtons.forEach((button) => {
        const id = button.id.split('-')[1];
        button.addEventListener('click', async (e) => {
            e.preventDefault();
            counts[id] += 1;
            updateCounter(id);
            await updateCountOnServer(id, counts[id]);
        });
    });

    await fetchCounts();
});

    </script>
</body>
</html>
